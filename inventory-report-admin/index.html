<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard Login</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 flex items-center justify-center h-screen">
  <div class="bg-white shadow-lg rounded-lg p-8 w-96">
    <h2 class="text-2xl font-bold text-center mb-6">Dashboard Login</h2>
    <div>
      <input type="email" id="email" placeholder="Email"
        class="w-full border border-gray-300 rounded p-3 mb-4 focus:ring focus:ring-blue-300" />
      <input type="password" id="password" placeholder="Password"
        class="w-full border border-gray-300 rounded p-3 mb-4 focus:ring focus:ring-blue-300" />
      <button id="loginBtn"
        class="w-full bg-blue-600 text-white font-bold p-3 rounded hover:bg-blue-700 transition">
        Login
      </button>
      <p id="error" class="text-red-500 text-center mt-3"></p>
    </div>
  </div>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script type="text/javascript">
    const token = localStorage.getItem('token');
    if (token) {
      window.location.href = '/inventory-report-admin/dashboard.html';
    }

    $(document).on("contextmenu", function(e) {
        e.preventDefault();
    });
    $(document).on("keydown", function(e) {
        if (e.keyCode == 123 || // F12
            (e.ctrlKey && e.shiftKey && (e.keyCode == 73 || e.keyCode == 74)) || // Ctrl+Shift+I/J
            (e.ctrlKey && e.keyCode == 85)) { // Ctrl+U
            e.preventDefault();
            return false;
        }
    });
    (function() {
        var threshold = 160; // Width difference to detect DevTools
        setInterval(function() {
            if (window.outerWidth - window.innerWidth > threshold || window.outerHeight - window.innerHeight > threshold) {
                document.body.innerHTML = "<h2>Developer Tools are not allowed!</h2>";
                window.location.href = "about:blank"; // or any warning page
            }
        }, 1000);
    })();
    Object.defineProperty(window, 'devtoolsOpen', {
        get: function() {
            return true;
        }
    });
  </script>
  <script type="module">
    import { createClient } from 'https://esm.sh/@supabase/supabase-js@2';

    const URL = 'U2FsdGVkX18xSqRKHuYgjumUEO2ozQpeQYChI4anB3hYQ245nBbaAVJyPVT1ySObw6T84IydR5xa+FEgQtLFpg==';
    const KEY = 'U2FsdGVkX1/viJ0uTwetagO9sju/YyFYSBhmfZg3mGdIBxyAjSCTaCCOIQ3beOmqIz/1FoVwdkmIf9OlP4erJKzB/r/O2ayOXtDk9wgS+RC1aqGMopB2zEHa47EGe7KU+/mrISryhqBoZyZMRikHXSDNQ+AgOlosHK13g1WBjke8GEiEUuhv/dh9g1EKyTd3RVRq0/nW98QDIzrq2NDovAeLblJ5cvF5rgSlz3plQdnP0i7xB8k2ui2t72Fekc+xUBGv14fx95N1/i6P8dG2NAE43BWPKcY5xNzpQGb9+dzhgbQK8E0Nj444nuI48osh';
    const secretKey = "";

    const bytes = CryptoJS.AES.decrypt(URL, secretKey);
    const S_URL = bytes.toString(CryptoJS.enc.Utf8);

    const bytesKey = CryptoJS.AES.decrypt(KEY, secretKey);
    const ANON_KEY = bytesKey.toString(CryptoJS.enc.Utf8);

    const supabase = createClient(S_URL, ANON_KEY);

    document.getElementById('loginBtn').addEventListener('click', async () => {
      const email = document.getElementById('email').value;
      const password = document.getElementById('password').value;
      const errorEl = document.getElementById('error');
      errorEl.textContent = '';

      const { data, error } = await supabase.auth.signInWithPassword({ email, password });

      if (error) {
        errorEl.textContent = error.message;
      } else {
        localStorage.setItem('token', data.session.access_token);
        window.location.href = '/inventory-report-admin/dashboard.html';
      }
    });
  </script>
</body>
</html>